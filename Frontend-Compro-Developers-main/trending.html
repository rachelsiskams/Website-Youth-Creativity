<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="initial-scale=1, width=device-width" />

    <title>Trending</title>
    <!-- Untuk membuat icon pada title -->
    <link rel="icon" href="./public/image-24removebgpreview-1@2x.png" type="image/x-icon" />

    <!-- cdnjs CSS -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css"
      integrity="sha512-SnH5WK+bZxgPHs44uWIX+LLJAJ9/2PkPKZ5QiAj6Ta86w+fsb2TkcmfRyVX3pBnMFcV7oQPJkl9QevSCWr3W6A=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous" />

    <link rel="stylesheet" href="./global.css" />
    <link rel="stylesheet" href="./trending.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto Mono:wght@700&display=swap" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
  </head>
  <body style="width: 100vw">
    <div class="trending">
      <section class="page-trending" style="overflow-x: hidden;">
        <div class="f-r-a-m-e">
          <img class="f-r-a-m-e-child" alt="" src="./public/main-container@2x.png" />

          <img class="image-24-removebg-preview-1-icon2" loading="lazy" alt="" src="./public/image-24removebgpreview-1@2x.png" />
        </div>
        <div class="home-button">
          <div class="menu-long-capsule-shape2" id="menuLongCapsuleShape">
            <div class="home-button-when-got-click-wil14" id="idhome">
              <b class="so-when-this13">Beranda</b>
            </div>
            <div class="home-button-when-got-click-wil15" id="homeButtonWhenGotClickWil">
              <b class="so-when-this14">Rekomendasi</b>
            </div>
            <button class="home-button-when-got-click-wil16" id="homeButtonWhenGotClickWil1">
              <b class="so-when-this15">Trending</b>
            </button>
            <div class="home-button-when-got-click-wil17" id="homeButtonWhenGotClickWil2">
              <b class="so-when-this16">Tentang Kami</b>
            </div>
          </div>
          <button class="home-button-when-got-click-wil18" id="homeButtonWhenGotClickWil3">
            <b class="home-button-when1">HUBUNGI KAMI</b>
          </button>
        </div>
        <div class="search-engine1">
          <div class="search-engine-instance-parent frame-parent7">
            <div class="search-engine-instance" style="border: none">
              <div class="search-engine2" style="padding: 0%; border: none">
                <div class="" style="display: flex; padding-left: 1vw; padding: 0.3vw; align-items: center">
                  <img class="vector-icon10" alt="" src="./public/icon-search.png" style="float: left; width: 3.5vw; height: auto" />
                  <input id="query" class="search-engine-item" style="font-size: 16px; color: black; width: 31.4vw; margin: 0%; float: right" placeholder="Selamat Datang,temukan yang anda minati!" type="text" />
                  <button id="search-button" style="color:white;background-color: var(--color-cornflowerblue-100); padding: 1vw; border-radius: 1.2vw; border: none; width: 6vw" onclick="searchtitle()">Cari</button>
                </div>
              </div>
            </div>
            <!-- card 1 -->
            <div class="row grid-card"></div>
            <div class="notif-search" style="display: none; flex-direction: column; position: relative; align-self: center">
              <img src="public/not-found.png" alt="" style="width: 30vw; width: 30vw; border-top-left-radius: 1vw; border-top-right-radius: 1vw" />
              <div style="background-color: rgba(255, 255, 255, 0); width: 30vw; padding: 1vw; margin-bottom: 10vw">Pencarian Tidak Ditemukan Coba Kata Kunci Lainnya</div>
            </div>
            <!-- end card 6 -->
          </div>
        </div>
      </section>
    </div>
    <!-- Footer -->
    <footer>
      <div class="footer-content">
        <h3>Youth Creativity</h3>
        <p>Memberi informasi serta mempermudah anak muda untuk mengembangkan kreativitas mereka pada zaman sekarang.</p>
        <ul class="icon">
          <li>
            <a href=""><i class="fa-solid fa-phone"></i></a>
          </li>
          <li>
            <a href=""><i class="fa-solid fa-envelope"></i></a>
          </li>
          <li>
            <a href=""><i class="fa-solid fa-location-dot"></i></a>
          </li>
        </ul>
        <div class="footer-bottom">
          <p>Created by Compro Developers</p>
        </div>
      </div>
    </footer>
    <!-- End Footer -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script>
      var notifsearch = document.getElementsByClassName('notif-search')[0];
      var query = document.getElementById('query');

      function pencariantidakditemukan() {
        let frame_parent7 = document.getElementsByClassName('frame-parent7')[0];
        frame_parent7.style.alignItems = 'center';
        notifsearch.style.display = 'flex';
        refresh();
      }
      function pencarianditemukan() {
        let frame_parent7 = document.getElementsByClassName('frame-parent7')[0];
        frame_parent7.style.alignItems = 'flex-end';
        notifsearch.style.display = 'none';
      }
      const content = document.getElementsByClassName('grid-card')[0];
      content.innerHTML += `
      
      `;
      var query = document.getElementById('query');
      query.addEventListener('keydown', function () {
        if (event.keyCode === 13) {
          searchdb();
        } else {
        }
      });
      function refresh() {
        content.innerHTML = '';
      }
      function searchdb() {
        const request = 'searchdbtr';
        const queryvalue = query.value;
        const content = document.getElementsByClassName('grid-card')[0];
        console.log(query.value);
        $.ajax({
          url: 'connection.php',
          type: 'POST',
          data: {
            request: request,
            query: query.value,
          },
          success: function (response) {
            console.log(response);
            let hasil = JSON.parse(response);

            if (hasil.status === 'success') {
              refresh();
              pencarianditemukan();
              const arraynama = hasil['title'];
              const arraygambar = hasil['img'];
              const arrayid = hasil['id'];
              const arraydeskripsi = hasil['sectiontop'];
              console.log('berhasil lanjut');
              const content = document.getElementsByClassName('grid-card')[0];
              if (arraynama.length === 1) {
                for (const key in arraynama) {
                  content.innerHTML += `
                        <div class="col-md-4 mb-3">
                          <div class="card">
                            <img src="src/trending/image${arraygambar[key]}.png" class="card-img" style="" alt="gambar1">
                            <div class="card-body">
                              <h5 class="card-title">${arraynama[key].substring(0, 35)}...</h5>
                              <p class="card-text" style="color: #616161;text-align:justify">${arraydeskripsi[key].substring(0, 120)}...</p>
                              <a href="readmore.html?id=${arrayid[key]}&c=tr" class="btn btn-primary" style="background-color: #5783DB;">Selengkapnya</a>
                            </div>
                          </div>
                        </div>
                        <div class="col-md-4 mb-3" style="visibility: hidden;">
                          <div class="card">
                            <img src="src/trending/image${arraygambar[key]}.png" class="card-img" style="" alt="gambar1">
                            <div class="card-body">
                              <h5 class="card-title">${arraynama[key].substring(0, 35)}...</h5>
                              <p class="card-text" style="color: #616161;text-align:justify">${arraydeskripsi[key].substring(0, 120)}...</p>
                              <a href="readmore.html?id=${arrayid[key]}&c=tr" class="btn btn-primary" style="background-color: #5783DB;">Selengkapnya</a>
                            </div>
                          </div>
                        </div>
                        `;
                }
              } else {
                for (const key in arraynama) {
                  content.innerHTML += `
                        <div class="col-md-4 mb-3">
                          <div class="card">
                            <img src="src/trending/image${arraygambar[key]}.png" class="card-img" style="" alt="gambar1">
                            <div class="card-body">
                              <h5 class="card-title">${arraynama[key].substring(0, 35)}...</h5>
                              <p class="card-text" style="color: #616161;text-align:justify">${arraydeskripsi[key].substring(0, 120)}...</p>
                              <a href="readmore.html?id=${arrayid[key]}&c=tr" class="btn btn-primary" style="background-color: #5783DB;">Selengkapnya</a>
                            </div>
                          </div>
                        </div>
                        `;
                }
              }
            } else {
              pencariantidakditemukan();
            }
          },
        });
      }
      readdb();
      function readdb() {
        const request = 'readdbtr';
        const content = document.getElementsByClassName('grid-card')[0];
        $.ajax({
          url: 'connection.php',
          type: 'POST',
          data: {
            request: request,
          },
          success: function (response) {
            console.log(response);
            let hasil = JSON.parse(response);

            if (hasil.status === 'success') {
              refresh();
              pencarianditemukan();
              const arraynama = hasil['title'];
              const arraygambar = hasil['img'];
              const arrayid = hasil['id'];
              const arraydeskripsi = hasil['sectiontop'];
              const content = document.getElementsByClassName('grid-card')[0];
              for (const key in arraynama) {
                console.log(`${arraydeskripsi[key].substring(0.12)}`);
                content.innerHTML += `
                        <div class="col-md-4 mb-3">
                          <div class="card">
                            <img src="src/trending/image${arraygambar[key]}.png" class="card-img" style="" alt="gambar1">
                            <div class="card-body">
                              <h5 class="card-title" style="">${arraynama[key].substring(0, 35)}...</h5>
                              <p class="card-text" style="color: #616161;text-align:justify">${arraydeskripsi[key].substring(0, 120)}...</p>
                              <a href="readmore.html?id=${arrayid[key]}&c=tr" class="btn btn-primary" style="background-color: #5783DB;">Selengkapnya</a>
                            </div>
                          </div>
                        </div>
                        `;
              }
            } else {
              pencariantidakditemukan();
            }
          },
        });
      }
      var idhome = document.getElementById('idhome');
      if (idhome) {
        idhome.addEventListener('click', function (e) {
          window.location.href = './index.html';
        });
      }

      var homeButtonWhenGotClickWil = document.getElementById('homeButtonWhenGotClickWil');
      if (homeButtonWhenGotClickWil) {
        homeButtonWhenGotClickWil.addEventListener('click', function (e) {
          window.location.href = './rekomendasi-page.html';
        });
      }

      var homeButtonWhenGotClickWil2 = document.getElementById('homeButtonWhenGotClickWil2');
      if (homeButtonWhenGotClickWil2) {
        homeButtonWhenGotClickWil2.addEventListener('click', function (e) {
          window.location.href = './tentang-page.html';
        });
      }

      var menuLongCapsuleShape = document.getElementById('homeButtonWhenGotClickWil13');
      if (menuLongCapsuleShape) {
        menuLongCapsuleShape.addEventListener('click', function (e) {
          window.location.href = './index.html';
        });
      }

      var homeButtonWhenGotClickWil3 = document.getElementById('homeButtonWhenGotClickWil3');
      if (homeButtonWhenGotClickWil3) {
        homeButtonWhenGotClickWil3.addEventListener('click', function (e) {
          window.location.href = './call-page.html';
        });
      }

      var berandaVariant2Container = document.getElementById('berandaVariant2Container');
      if (berandaVariant2Container) {
        berandaVariant2Container.addEventListener('click', function (e) {
          // Please sync "Selengkapnya" to the project
        });
      }
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM" crossorigin="anonymous"></script>
  </body>
</html>
